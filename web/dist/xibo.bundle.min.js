!function(){var t={64720:function(e,t,a){const n=a(15234),o=a(95061),i=function(e,t,a){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"ne"===e&&""===t||"eq"===e&&a==t||"neq"===e&&a!=t||"gt"===e&&!Number.isNaN(parseInt(a))&&!Number.isNaN(parseInt(t))&&parseInt(a)>parseInt(t)||"lt"===e&&!Number.isNaN(parseInt(a))&&!Number.isNaN(parseInt(t))&&parseInt(a)<parseInt(t)||"egt"===e&&!Number.isNaN(parseInt(a))&&!Number.isNaN(parseInt(t))&&parseInt(a)>=parseInt(t)||"elt"===e&&!Number.isNaN(parseInt(a))&&!Number.isNaN(parseInt(t))&&parseInt(a)<=parseInt(t)||"isTopLevel"===e&&t==n};window.forms={createFields:function(e,t,a,o){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5?arguments[5]:void 0,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];for(const n in e)if(e.hasOwnProperty(n)){const s=e[n];if(!0===s.skip)continue;if(null===s.value&&void 0!==s.default&&(s.value=s.default),s.visibility.length){const e=[];for(let t=0;t<s.visibility.length;t++){const a=s.visibility[t],n={type:a.type,conditions:[]};for(let e=0;e<a.conditions.length;e++){const t=a.conditions[e];n.conditions.push({field:t.field,type:t.type,value:t.value})}e.push(n)}s.visibility=JSON.stringify(e)}if("datasetSelector"===s.type&&(s.datasetSearchUrl=urlsForApi.dataset.search.url,""==s.value?(s.initialValue=null,s.initialKey=null):(s.initialValue=s.value,s.initialKey="dataSetId")),"datasetField"===s.type&&(""==s.value?(s.initialValue=null,s.initialKey=null):(s.initialValue=s.value,s.initialKey="datasetField")),"menuBoardSelector"===s.type&&(s.menuBoardSearchUrl=urlsForApi.menuBoard.search.url,""==s.value?(s.initialValue=null,s.initialKey=null):(s.initialValue=s.value,s.initialKey="menuId")),"menuBoardCategorySelector"===s.type&&(s.menuBoardCategorySearchUrl=urlsForApi.menuBoard.categorySearch.url,""==s.value?(s.initialValue=null,s.initialKey=null):(s.initialValue=s.value,s.initialKey="menuCategoryId")),"mediaSelector"===s.type&&(s.mediaSearchUrl=urlsForApi.library.get.url,""==s.value?(s.initialValue=null,s.initialKey=null):(s.initialValue=s.value,s.initialKey="mediaId")),"fontSelector"===s.type&&(s.fontsSearchUrl=getFontsUrl+"?length=10000"),"commandSelector"===s.type&&(s.commandSearchUrl=urlsForApi.command.search.url,""==s.value?(s.initialValue=null,s.initialKey=null):(s.initialValue=s.value,s.initialKey="code")),"playlistMixer"===s.type&&(s.playlistId=o),"color"===s.type&&""!=s.format&&(s.colorFormat=s.format),"connectorProperties"===s.type&&(s.connectorPropertiesUrl=urlsForApi.connectorProperties.search.url.replace(":id",a)+"?propertyId="+s.id,""==s.value?(s.initialValue=null,s.initialKey=null):(s.initialValue=s.value,s.initialKey=s.id)),s.name=s.id,a&&(s.id=a+"_"+s.id),s.variant&&"autocomplete"===s.variant&&(s.isAutoComplete=!0),templates.forms.hasOwnProperty(s.type)){const e=$(templates.forms[s.type](Object.assign({},s,{trans:"undefined"==typeof propertiesPanelTrans?{}:propertiesPanelTrans})));let a=$(t);if(s.propertyGroupId){const e=i.find((e=>e.id===s.propertyGroupId));e&&($(t).find("#"+s.propertyGroupId).length?a=$(t).find("#"+s.propertyGroupId+" .field-container"):(a.append($(templates.forms.group({id:e.id,title:e.title,helpText:e.helpText,expanded:e.expanded}))),a=$($(t).find("#"+s.propertyGroupId)).find(".field-container")))}if(l?a.prepend(e):a.append(e),s.helpText&&0===e.find(".input-info-container .xibo-help-text").length&&e.find(".input-info-container").append($(templates.forms.addOns.helpText({helpText:s.helpText}))),s.customPopOver&&e.find(".input-info-container").append($(templates.forms.addOns.customPopOver({content:s.customPopOver}))),s.playerCompatibility&&e.find(".input-info-container").append($(templates.forms.addOns.playerCompatibility(s.playerCompatibility))),s.variant&&"dateFormat"===s.variant&&(e.find("label.control-label").append($(templates.forms.addOns.dateFormatHelperPopup({content:Handlebars.compile($("#php-date-format-table").html())}))),e.find('[data-toggle="popover"]').popover({sanitize:!1,trigger:"manual"}).on("mouseenter",(function(e){$(e.currentTarget).popover("show")}))),"datasetField"===s.type&&void 0!==s.value&&String(s.value).length>0&&e.find("select").attr("data-value",s.value),s.dependsOn&&!e.attr("data-depends-on")&&e.attr("data-depends-on",s.dependsOn),s.visibility.length&&!e.attr("data-visibility")&&e.attr("data-visibility",s.visibility),s?.validation?.tests?.length&&!e.attr("data-is-required")){let t=!1;$.each(s.validation.tests,(function(a,n){$.each(n.conditions,(function(a,n){"required"!==n?.type||t||(e.attr("data-is-required",!0),s.isRequired=!0,t=!0)}))}))}r&&e.find("[name]").addClass(r)}else console.error("Form type not found: "+s.type)}n.reloadTooltips($(t),{position:"left"})},initFields:function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=this,r=function(t,a){return a?$(a).is(t)?$(a):$():$(e).find(t)};r(".dropdown-input-group",t).each((function(e,t){$(t).find("select").find("option[data-content]").each((function(e,t){const a=$(t),n=$(a.data("content")),o=n.find("img");o.attr("src",assetDownloadUrl.replace(":assetId",o.attr("src"))),a.data("content",n.html())}))})),r(".dataset-order-clause",t).each((function(e,t){const a=$(t),o=a.data("depends-on-value");o&&$.ajax({url:urlsForApi.dataset.search.url,type:"GET",data:{dataSetId:o}}).done((function(e){const t=e.data[0].columns,o=a.find(".order-clause-container");if(0==o.length)return;const r=a.find("#input_"+a.data("order-id")),l=r.val()?JSON.parse(r.val()):[],s=function(){const e=[];o.find(".order-clause-row").each((function(t,a){const n=$(a),o=n.find(".order-clause").val(),i=n.find(".order-clause-direction").val();o&&e.push({orderClause:o,orderClauseDirection:i})})),r.val(JSON.stringify(e)).trigger("change")};o.empty();const c=formHelpers.getTemplate("dataSetOrderClauseTemplate"),d=datasetQueryBuilderTranslations.ascTitle,p=datasetQueryBuilderTranslations.descTitle;if(0==l.length){const e={columns:t,title:"1",orderClause:"",orderClauseAsc:"",orderClauseDesc:"",buttonGlyph:"fa-plus",ascTitle:d,descTitle:p};o.append(c(e))}else{let e=0;$.each(l,(function(a,n){e++;const i="ASC"==n.orderClauseDirection,r={columns:t,title:e,orderClause:n.orderClause,orderClauseAsc:i,orderClauseDesc:!i,buttonGlyph:1==e?"fa-plus":"fa-minus",ascTitle:d,descTitle:p};o.append(c(r))}))}n?i.makeFormReadOnly(a):(o.on("click","button",(function(e){if(e.preventDefault(),$(e.currentTarget).find("i").hasClass("fa-plus")){const e={columns:t,title:o.find(".form-inline").length+1,orderClause:"",orderClauseAsc:"",orderClauseDesc:"",buttonGlyph:"fa-minus",ascTitle:d,descTitle:p};o.append(c(e))}else $(e.currentTarget).closest(".form-inline").remove();s()})),a.on("change",'select:not([type="hidden"])',(function(){s()})))})).fail((function(e,t,a){console.error(e,t,a)}))})),r(".dataset-column-selector",t).each((function(e,t){const a=$(t),o=a.data("depends-on-value");o&&$.ajax({url:urlsForApi.dataset.search.url,type:"GET",data:{dataSetId:o}}).done((function(e){const t=e.data[0].columns,o=a.find("#columnsOut"),i=a.find("#columnsIn");if(0==o.length||0==i.length)return;const r=a.find("#input_"+a.data("select-id")),l=r.val()?JSON.parse(r.val()):[],s=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[];i.find("li").each((function(e,a){const n=$(a).attr("id");t.push(Number(n))})),a.find(".temp").remove(),$.each(t,(function(e,t){a.append('<input type="hidden" class="temp" name="dataSetColumnId[]" value="'+t+'" />')})),r.val(JSON.stringify(t)).trigger("change",[{skipSave:e}])};o.empty(),i.empty();const c=datasetColumnSelectorTranslations.colAvailable,d=datasetColumnSelectorTranslations.colSelected;a.find(".col-out-title").text(c),a.find(".col-in-title").text(d);const p=[],u=[];$.each(t,(function(e,t){l.includes(t.dataSetColumnId)?u.push(t):p.push(t)}));const f=a.find("#columnsOut");$.each(p,(function(e,t){f.append('<li class="li-sortable" id="'+t.dataSetColumnId+'">'+t.heading+"</li>")}));const m=a.find("#columnsIn");$.each(u,(function(e,t){m.append('<li class="li-sortable" id="'+t.dataSetColumnId+'">'+t.heading+"</li>")})),n||(a.find("#columnsIn, #columnsOut").sortable({connectWith:".connectedSortable",dropOnEmpty:!0,update:function(){s()}}).disableSelection(),a.find(".li-sortable").on("dblclick",(function(e){const t=$(e.currentTarget);t.appendTo(t.parent().is("#columnsIn")?f:m),s()}))),s(!0)})).fail((function(e,t,a){console.error(e,t,a)}))})),r(".dataset-field-selector",t).each((function(t,a){const n=$(a),o=n.find("select"),i=$(e).find('input[name="dataTypeId"]'),r=n.data("depends-on-value");r&&(n.show(),$.ajax({url:urlsForApi.dataset.search.url,type:"GET",data:{dataSetId:r}}).done((function(e){const t=e.data[0].columns||[];if(i.length>0&&t.length>0){const e=(a=t,r=i.val(),a.reduce((function(e,t){const a=String(r);let n=[];return n=-1!==a.indexOf(",")?a.split(","):[a],-1!==n.indexOf(String(t.dataTypeId))?[...e,t]:e}),[])||[]);e.length>0?(o.find("option[value]").remove(),$.each(e,(function(e,t){o.append($('<option value="'+t.heading+'">'+t.heading+"</option>"))})),void 0!==o.data("value")?o.val(o.data("value")).trigger("change",[{skipSave:!0}]):(1===e.length||e.length>1)&&o.val(e[0].heading).trigger("change")):n.hide()}var a,r})))})),r(".dataset-filter-clause",t).each((function(e,t){const a=$(t),o=a.data("depends-on-value");o&&$.ajax({url:urlsForApi.dataset.search.url,type:"GET",data:{dataSetId:o}}).done((function(e){const t=e.data[0].columns,o=a.find(".filter-clause-container");if(0==o.length)return;const r=a.find("#input_"+a.data("filter-id")),l=r.val()?JSON.parse(r.val()):[],s=function(){const e=[];o.find(".filter-clause-row").each((function(t,a){const n=$(a),o=n.find(".filter-clause").val(),i=n.find(".filter-clause-operator").val(),r=n.find(".filter-clause-criteria").val(),l=n.find(".filter-clause-value").val();o&&e.push({filterClause:o,filterClauseOperator:i,filterClauseCriteria:r,filterClauseValue:l})})),r.val(JSON.stringify(e)).trigger("change")};o.empty();const c=formHelpers.getTemplate("dataSetFilterClauseTemplate"),d=datasetQueryBuilderTranslations.filterOptions,p=datasetQueryBuilderTranslations.filterOperatorOptions;if(0==l.length){const e={columns:t,filterOptions:d,filterOperatorOptions:p,title:"1",filterClause:"",filterClauseOperator:"AND",filterClauseCriteria:"",filterClauseValue:"",buttonGlyph:"fa-plus"};o.append(c(e))}else{let e=0;$.each(l,(function(a,n){e++;const i={columns:t,filterOptions:d,filterOperatorOptions:p,title:e,filterClause:n.filterClause,filterClauseOperator:n.filterClauseOperator,filterClauseCriteria:n.filterClauseCriteria,filterClauseValue:n.filterClauseValue,buttonGlyph:1==e?"fa-plus":"fa-minus"};o.append(c(i))}))}n?i.makeFormReadOnly(a):(o.on("click","button",(function(e){if(e.preventDefault(),$(e.currentTarget).find("i").hasClass("fa-plus")){const e={columns:t,filterOptions:d,filterOperatorOptions:p,title:o.find(".form-inline").length+1,filterClause:"",filterClauseOperator:"AND",filterClauseCriteria:"",filterClauseValue:"",buttonGlyph:"fa-minus"};o.append(c(e))}else $(e.currentTarget).closest(".form-inline").remove();s()})),a.on("change",'select:not([type="hidden"]), input:not([type="hidden"])',(function(e){s()})))})).fail((function(e,t,a){console.error(e,t,a)}))})),r(".ticker-tag-selector",t).each((function(e,t){const a=$(t),o={title:"text",summary:"text",content:"text",author:"text",permalink:"text",link:"text",date:"date",publishedDate:"date",image:"image"},r=a.find("#tagsOut"),l=a.find("#tagsIn");if(0==r.length||0==l.length)return;const s=a.find("#input_"+a.data("select-id")),c=s.val()?JSON.parse(s.val()):[],d=Object.keys(c),p=_.debounce((function(){const e=[],t=s.val()?JSON.parse(s.val()):[];l.find("li").each((function(t,a){const n=$(a).attr("id");e.push(n)})),a.find(".ticker-tag-styles .ticker-tag-style").remove(),e.forEach((e=>{const n=$(templates.forms.tickerTagStyle({id:e,type:o[e],value:t[e],trans:tickerTagSelectorTranslations,fontsSearchUrl:getFontsUrl+"?length=10000"}));n.appendTo(a.find(".ticker-tag-styles")),n.off().on("change inputChange",u)})),i.initFields(a.find(".ticker-tag-styles")),u()}),100),u=_.debounce((function(){const e={};a.find(".ticker-tag-style").each((function(t,a){const n=$(a).data("component-id");e[n]={};const i=$(a).find(".ticker-tag-style-property");e[n].tagType=o[n],i.find("select, input").each((function(t,a){const o=$(a).data("tag-style-input"),i="checkbox"===$(a).attr("type")?$(a).is(":checked"):$(a).val();e[n][o]=i}))})),s.val(JSON.stringify(e)).trigger("change")}),100);r.empty(),l.empty();const f=tickerTagSelectorTranslations.tagAvailable,m=tickerTagSelectorTranslations.tagSelected;a.find(".col-out-title").text(f),a.find(".col-in-title").text(m);const g=[],h=[];$.each(Object.keys(o),(function(e,t){d.includes(t)?h.push(t):g.push(t)}));const y=a.find("#tagsOut");$.each(g,(function(e,t){const a=$('<li class="li-sortable" id="'+t+'" data-tag-type="'+o[t]+'">'+tickerTagSelectorTranslations[t]+"</li>").data("tag-type",o[t]);y.append(a)}));const b=a.find("#tagsIn");$.each(h,(function(e,t){const a=$('<li class="li-sortable" id="'+t+'" data-tag-type="'+o[t]+'">'+tickerTagSelectorTranslations[t]+"</li>");b.append(a)})),n||(a.find("#tagsIn, #tagsOut").sortable({connectWith:".connectedSortable",dropOnEmpty:!0,receive:p,update:p}).disableSelection(),a.find(".li-sortable").on("dblclick",(function(e){const t=$(e.currentTarget);t.appendTo(t.parent().is("#tagsIn")?y:b),p()}))),p(!0)})),r(".dataset-column-style-selector",t).each((function(e,t){const a=$(t),o=a.data("depends-on-value");o&&$.ajax({url:urlsForApi.dataset.search.url,type:"GET",data:{dataSetId:o}}).done((function(e){const t=e.data[0].columns,o={3:"date",5:"image"},r=function(e){return t.find((t=>t.dataSetColumnId==e))},l=a.find("#colsOut"),s=a.find("#colsIn");if(0==l.length||0==s.length)return;const c=a.find("#input_"+a.data("select-id")),d=c.val()?JSON.parse(c.val()):[],p=Object.keys(d),u=_.debounce((function(){const e=[],t=c.val()?JSON.parse(c.val()):[];s.find("li").each((function(t,a){const n=$(a).attr("id"),i=(l=$(a).data("colType"),o[l]?o[l]:"text");var l;const s=r(n);e.push({id:n,type:i,name:s.heading})})),a.find(".dataset-column-styles .dataset-col-style").remove(),e.forEach((e=>{const n=$(templates.forms.datasetColStyle({id:e.id,type:e.type,name:e.name,value:t[e.id],trans:datasetColStyleSelectorTranslations,fontsSearchUrl:getFontsUrl+"?length=10000"}));n.appendTo(a.find(".dataset-column-styles")),n.off().on("change inputChange",(function(){f()}))})),i.initFields(a.find(".dataset-column-styles")),f()}),100),f=_.debounce((function(){const e={};let t=0;a.find(".dataset-col-style").each((function(a,n){const o=$(n).data("component-id");e[o]={};const i=$(n).find(".dataset-col-style-property");e[o].playOrder=t,t++,e[o].colId=o,i.find("select, input").each((function(t,a){const n=$(a).data("dataset-col-style-input"),i="checkbox"===$(a).attr("type")?$(a).is(":checked"):$(a).val();e[o][n]=i}))})),c.val(JSON.stringify(e)).trigger("change")}),100);l.empty(),s.empty();const m=datasetColStyleSelectorTranslations.colAvailable,g=datasetColStyleSelectorTranslations.colSelected;a.find(".col-out-title").text(m),a.find(".col-in-title").text(g);const h=[],y=[];$.each(Object.keys(t),(function(e,a){const n=t[a].dataSetColumnId;p.find((e=>n==e))?y.push(n):h.push(n)}));const b=a.find("#colsOut");$.each(h,(function(e,t){const a=r(t),n=$('<li class="li-sortable" id="'+a.dataSetColumnId+'" data-col-type="'+a.dataTypeId+'">'+a.heading+"</li>").data("col-type",a.dataTypeId);b.append(n)}));const v=a.find("#colsIn");$.each(y,(function(e,t){const a=r(t),n=$('<li class="li-sortable" id="'+a.dataSetColumnId+'" data-col-type="'+a.dataTypeId+'">'+a.heading+"</li>");v.append(n)})),n||(a.find("#colsIn, #colsOut").sortable({connectWith:".connectedSortable",dropOnEmpty:!0,receive:u,update:u}).disableSelection(),a.find(".li-sortable").on("dblclick",(function(e){const t=$(e.currentTarget);t.appendTo(t.parent().is("#colsIn")?b:v),u()}))),u(!0)})).fail((function(e,t,a){console.error(e,t,a)}))})),r(".languageSelect",t).each((function(t,a){const n=$(a).find("select.form-control");if($(a).hasClass("momentLocales")){const e=moment.locales().sort(),t=n.val();n.find("option").remove(),e.unshift("");for(let a=0;a<e.length;a++){const o=e[a],i=momentLocalesTrans[o]||o,r=$(`<option value="${o}">${o} - ${i}</option>`);t==o&&r.prop("selected",!0),r.appendTo(n)}}makeLocalSelect(n,e)})),r(".playlist-mixer",t).each((function(e,t){const a=$(t);function o(e,t){const a=t.find(".subplaylist-id");a.data("fieldId")?$.ajax({method:"GET",url:urlsForApi.playlist.get.url+"?playlistId="+a.data("fieldId"),success:function(t){t.data&&t.data.length>0?(a.append('<option value="'+t.data[0].playlistId+'" data-tags="'+t.data[0].tags+'" selected>'+t.data[0].name+"</option>"),r(e,a)):(a.parent().append('<input type="hidden" value="'+a.data("fieldId")+'" name="subPlaylistId[]"><span title="'+playlistMixerTranslations.noPermission+'"><i class="fa fa-lock"></i>&nbsp;'+playlistMixerTranslations.playlistId+" "+a.data("fieldId")+"</span>"),a.remove()),n&&i.makeFormReadOnly(e)},error:function(){a.parent().append('{% trans "An unknown error has occurred. Please refresh" %}')}}):r(e,a),t.find('select[name="spotFill[]"]').select2({templateResult:function(e){return e.id?$(e.element).data().templateResult:e.text},dropdownAutoWidth:!0,minimumResultsForSearch:-1})}function r(e,t){t.select2({dropdownAutoWidth:!0,ajax:{url:urlsForApi.playlist.get.url+"?notPlaylistId="+e.data("playlistId"),dataType:"json",delay:250,data:function(e){const t={start:0,length:10,name:e.term};return null!=e.page&&(t.start=10*(e.page-1)),t},processResults:function(t,a){const n=[];$.each(t.data,(function(e,t){n.push({id:t.playlistId,text:t.name})}));let o=a.page||1;return o=o>1?o-1:o,1===o&&n.length<=0&&e.find(".sub-playlist-no-playlists-message").removeClass("d-none"),{results:n,pagination:{more:10*o<t.recordsTotal}}}}})}const l=a.find("#input_"+a.data("mixer-id")),s=l.val()?JSON.parse(l.val()):[],c=a.find(".mixer-playlist-container");if(0==c.length)return;const d=function(){const e=[];c.find(".subplaylist-item-row").each((function(t,a){const n=$(a),o=n.find(".subplaylist-id").val(),i=n.find(".subplaylist-spots").val(),r=n.find(".subplaylist-spots-length").val(),l=n.find(".subplaylist-spots-fill").val();o&&e.push({rowNo:t+1,playlistId:o,spots:i,spotLength:r,spotFill:l})})),l.val(JSON.stringify(e)).trigger("xiboInputChange")};c.empty();const p=formHelpers.getTemplate("subPlaylistContainerTemplate");c.append(p({trans:playlistMixerTranslations}));const u=formHelpers.getTemplate("subPlaylistFormTemplate");if(0==s.length){const e={playlistId:"",spots:"",spotLength:"",spotFill:"",fillTitle:playlistMixerTranslations.fillTitle,padTitle:playlistMixerTranslations.padTitle,repeatTitle:playlistMixerTranslations.repeatTitle,fillHelpText:playlistMixerTranslations.fillHelpText,padHelpText:playlistMixerTranslations.padHelpText,repeatHelpText:playlistMixerTranslations.repeatHelpText};c.find(".subplaylist-items-content").append(u(e))}else $.each(s,(function(e,t){const a={playlistId:t.playlistId,spots:t.spots,spotLength:t.spotLength,spotFill:t.spotFill,fillTitle:playlistMixerTranslations.fillTitle,padTitle:playlistMixerTranslations.padTitle,repeatTitle:playlistMixerTranslations.repeatTitle,fillHelpText:playlistMixerTranslations.fillHelpText,padHelpText:playlistMixerTranslations.padHelpText,repeatHelpText:playlistMixerTranslations.repeatHelpText};c.find(".subplaylist-items-content").append(u(a))}));c.on("click",".subplaylist-item-btn",(function(e){if(e.preventDefault(),$(e.currentTarget).find("i").hasClass("fa-plus")){const e={playlistId:"",spots:"",spotLength:"",subPlaylistIdSpotFill:"",fillTitle:playlistMixerTranslations.fillTitle,padTitle:playlistMixerTranslations.padTitle,repeatTitle:playlistMixerTranslations.repeatTitle,fillHelpText:playlistMixerTranslations.fillHelpText,padHelpText:playlistMixerTranslations.padHelpText,repeatHelpText:playlistMixerTranslations.repeatHelpText},t=$(u(e)).appendTo(c.find(".subplaylist-items-content"));o(a,t)}else $(e.currentTarget).closest(".subplaylist-item-row").remove();d()})),c.find(".subplaylist-item-row").each((function(e,t){o(a,$(t))})),a.on("change","select, input",(function(){d()})),c.sortable({axis:"y",items:".subplaylist-item-row",handle:".subplaylist-item-sort",containment:"parent",update:function(){d()}})})),r(".xibo-code-input",t).each((function(e,t){const a=$(t).find(".code-input"),n=a.val(),o=a.data("codeType");void 0===window.codeEditors&&(window.codeEditors={});const i=window.codeEditors[a.attr("id")]=monaco.editor.create($(t).find(".code-input-editor")[0],{value:n,fontSize:12,theme:"vs-dark",language:o,lineNumbers:"off",glyphMargin:!1,folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,automaticLayout:!0,minimap:{enabled:!1}});i.onDidChangeModelContent((()=>{a.val(i.getValue()).trigger("inputChange")})),a.on("change",(function(){i.setValue(a.val())}))})),r(".colorpicker-input.colorpicker-element",t).each((function(e,t){$(t).colorpicker({container:$(t).find(".picker-container"),align:"left",format:void 0!==$(t).data("colorFormat")&&$(t).data("colorFormat")});const a=$(t).find("input");a.on("focusout",(function(){if(""==a.val())if(void 0!==$(t).data("default")){const e=$(t).data("default");$(t).colorpicker("setValue",e)}else $(t).find(".input-group-addon").css("background-color","")}))})),r(".color-gradient",t).each((function(e,t){$(t).find(".colorpicker-input.colorpicker-element").colorpicker({container:$(t).find(".picker-container"),align:"left",format:void 0!==$(t).data("colorFormat")&&$(t).data("colorFormat")});const a="#222",n="#eee",o=$(t).find("[name]:not(.color-gradient-hidden).element-property"),i=$(t).find(".color-gradient-hidden.element-property"),r=o.filter('[name="gradientType"]'),l=o.filter('[name="gradientAngle"]'),s=o.filter('[name="gradientColor1"]'),c=o.filter('[name="gradientColor2"]');if(""!=i.val()){const e=JSON.parse(i.val());r.val(e.type).trigger("change"),s.parents(".colorpicker-input").colorpicker("setValue",e.color1),c.parents(".colorpicker-input").colorpicker("setValue",e.color2),l.val(e.angle)}const d=function(){""==s.val()&&s.parents(".colorpicker-input").colorpicker("setValue",a),""==c.val()&&c.parents(".colorpicker-input").colorpicker("setValue",n),""==l.val()&&l.val(0),l.parent().toggle("linear"===r.val())};o.addClass("skip-save"),o.on("change",(function(){const e=r.val(),t=s.val(),o=c.val(),p=l.val(),u={type:e,color1:""!=t?t:a,color2:""!=o?o:n};"linear"===e&&(u.angle=""!=p?p:0),d(),i.val(JSON.stringify(u)).trigger("change")})),d()})),r(".dateControl.date:not(.datePickerHelper)",t).each((function(e,t){"Jalali"==calendarType?initDatePicker($(t),systemDateFormat,jsDateOnlyFormat,{altFieldFormatter:function(e){const t=moment.unix(e/1e3);return t.set("hour",0),t.set("minute",0),t.set("second",0),t.format(systemDateFormat)}}):initDatePicker($(t),systemDateFormat,jsDateOnlyFormat)})),r(".dateControl.dateTime:not(.datePickerHelper)",t).each((function(e,t){const a=dateFormat.includes("s"),n=!dateFormat.includes("A");"Jalali"==calendarType?initDatePicker($(t),systemDateFormat,jsDateFormat,{timePicker:{enabled:!0,second:{enabled:a}}}):initDatePicker($(t),systemDateFormat,jsDateFormat,{enableTime:!0,time_24hr:n,enableSeconds:a,altFormat:$(t).data("customFormat")?$(t).data("customFormat"):jsDateFormat})})),r(".dateControl.month:not(.datePickerHelper)",t).each((function(e,t){"Jalali"==calendarType?initDatePicker($(t),systemDateFormat,jsDateFormat,{format:$(t).data("customFormat")?$(t).data("customFormat"):"MMMM YYYY",viewMode:"month",dayPicker:{enabled:!1},altFieldFormatter:function(e){const t=moment.unix(e/1e3);return t.set("date",1),t.set("hour",0),t.set("minute",0),t.set("second",0),t.format(systemDateFormat)}}):initDatePicker($(t),systemDateFormat,jsDateFormat,{plugins:[new flatpickrMonthSelectPlugin({shorthand:!1,dateFormat:systemDateFormat,altFormat:$(t).data("customFormat")?$(t).data("customFormat"):"MMMM Y",parseDate:function(e,t){return moment(e,t,!0).toDate()},formatDate:function(e,t,a){return moment(e).format(t)}})]})})),r(".dateControl.time:not(.datePickerHelper)",t).each((function(e,t){const a=dateFormat.includes("s");"Jalali"==calendarType?initDatePicker($(t),systemTimeFormat,jsTimeFormat,{onlyTimePicker:!0,format:jsTimeFormat,timePicker:{second:{enabled:a}},altFieldFormatter:function(e){const t=moment.unix(e/1e3);return t.set("second",0),t.format(systemTimeFormat)}}):initDatePicker($(t),systemTimeFormat,jsTimeFormat,{enableTime:!0,noCalendar:!0,enableSeconds:a,time_24hr:!0,altFormat:$(t).data("customFormat")?$(t).data("customFormat"):jsTimeFormat})})),r(".rich-text",t).each((function(t,a){formHelpers.setupCKEditor(e,$(a).attr("id"),!0,null,!1,!0)})),r(".world-clock-control",t).each((function(e,t){const a=$(t).find(".clocksContainer"),n=$(t).find(".world-clock-value");function o(e){const t=[];$(e).find(".form-clock").each((function(e,a){""!=$(a).find(".localSelect select").val()&&t.push({clockTimezone:$(a).find(".localSelect select").val(),clockHighlight:$(a).find(".clockHighlight").is(":checked"),clockLabel:$(a).find(".clockLabel").val()})})),n.attr("value",JSON.stringify(t))}function i(e){$(e).find(".localSelect select.form-control").each((function(t,a){makeLocalSelect($(a),$(e).hasClass("modal")?$(e):$("body"))})),$(e).find('input[type="checkbox"]').on("click",(function(){o(e)})),$(e).find('input[type="text"], select').on("change",(function(){o(e)}))}!function(e){if(0==e.length)return;const o=formHelpers.getTemplate("worldClockTemplate"),r=n.attr("value")?JSON.parse(n.attr("value")):[];if(0==r.length){const e={title:"1",clockTimezone:"",timezones:timezones,buttonGlyph:"fa-plus"};$(o(e)).appendTo(a),i(t)}else{let e=0;$.each(r,(function(t,n){e++;const i={title:e,clockTimezone:n.clockTimezone,clockHighlight:n.clockHighlight,clockLabel:n.clockLabel,timezones:timezones,buttonGlyph:1==e?"fa-plus":"fa-minus"};a.append(o(i))})),i(t)}a.on("click","button",(function(e){if(e.preventDefault(),$(e.currentTarget).find("i").hasClass("fa-plus")){const e={title:a.find(".form-clock").length+1,clockTimezone:"",timezones:timezones,buttonGlyph:"fa-minus"};a.append(o(e)),i(t)}else $(e.currentTarget).closest(".form-clock").remove()}))}($(t)),i(t)})),r(".font-selector",t).each((function(e,t){const a=$(t).find("select");$.ajax({method:"GET",url:a.data("searchUrl"),success:function(e){void 0!==e.data&&e.data.length>0&&$.each(e.data,(function(e,t){a.data("value")===t.familyName?(a.append($('<option value="'+t.familyName+'" selected>'+t.name+"</option>")),a.trigger("change",[{skipSave:!0}])):a.append($('<option value="'+t.familyName+'">'+t.name+"</option>"))})),n&&i.makeFormReadOnly($(t))}})})),r(".snippet-selector",t).each((function(e,t){const o=$(t).find("select"),r=o.data("target"),l=$("[name="+r+"]"),s=o.data("mode"),c=function(e){formHelpers.setupSnippetsSelector(e,(function(e){const t=$(e.currentTarget).val();if(null==t||""==t||0==l.length)return;const n="["+t+"]";if(formHelpers.getCKEditorInstance("input_"+a+"_"+r))formHelpers.insertToCKEditor("input_"+a+"_"+r,n);else if(l.hasClass("code-input")){const e=window.codeEditors["input_"+a+"_"+r],t={identifier:{major:1,minor:1},range:e.getSelection(),text:n,forceMoveMarkers:!0};e.executeEdits("custom-code",[t]),l.trigger("change")}else{const e=l[0].selectionStart,t=l.val();l.val(t.substring(0,e)+n+t.substring(e)),l.trigger("change")}}))};if("dataSet"==s){const e=$(t).data("dependsOn"),a=$("[name="+e+"]").val();a&&$.ajax({url:urlsForApi.dataset.search.url,type:"GET",data:{dataSetId:a},success:function(e){const t=e.data[0];t&&t.columns&&t.columns.length>0?(o.find("option[value]").remove(),$.each(t.columns,(function(e,t){o.append($('<option data-snippet-type="'+t.dataType+'" value="'+t.heading+"|"+t.dataSetColumnId+'">'+t.heading+"</option>"))})),0==t.columns.length?o.parent().hide():c(o),n&&i.makeFormReadOnly(o.parent())):o.parent().hide()},error:function(){o.parent().append('{% trans "An unknown error has occurred. Please refresh" %}')}})}else if("dataType"==s){const e=urlsForApi.widget.getDataType.url.replace(":id",a);$.ajax({method:"GET",url:e,success:function(e){e&&e.fields&&e.fields.length>0?(o.find("option[value]").remove(),$.each(e.fields,(function(e,t){o.append($('<option data-snippet-type="'+t.type+'" value="'+t.id+'">'+t.title+"</option>"))})),0==e.fields.length?o.parent().hide():c(o),n&&i.makeFormReadOnly(o.parent())):o.parent().hide()},error:function(){o.parent().append('{% trans "An unknown error has occurred. Please refresh" %}')}})}else"options"==s?c(o):"media"==s&&function(e){e.data("searchUrl",urlsForApi.library.get.url),e.data("imageUrl",urlsForApi.library.download.url),formHelpers.setupMediaSelector(e,(function(e){const t=$(e.currentTarget).val();if(null==t||""==t)return;const n='<img alt="" src="'+urlsForApi.library.download.url.replace(":id",t)+'?preview=1" />';if(formHelpers.getCKEditorInstance("input_"+a+"_"+r))formHelpers.insertToCKEditor("input_"+a+"_"+r,n);else if(l.length>0){const e=l[0].selectionStart,t=l.val();l.val(t.substring(0,e)+n+t.substring(e))}}))}(o)})),r(".effect-selector",t).each((function(e,t){const a=$(t).find("select"),n=a.data("effects-type").split(" "),i=-1!=n.indexOf("all");if($.each([{effect:"none",group:"showAll"},{effect:"marqueeLeft",group:"showAll"},{effect:"marqueeRight",group:"showAll"},{effect:"marqueeUp",group:"showAll"},{effect:"marqueeDown",group:"showAll"},{effect:"noTransition",group:"showPaged"},{effect:"fade",group:"showPaged"},{effect:"fadeout",group:"showPaged"},{effect:"scrollHorz",group:"showPaged"},{effect:"scrollVert",group:"showPaged"},{effect:"flipHorz",group:"showPaged"},{effect:"flipVert",group:"showPaged"},{effect:"shuffle",group:"showPaged"},{effect:"tileSlide",group:"showPaged"},{effect:"tileBlind",group:"showPaged"}],(function(e,t){if(-1!=n.indexOf("noNone")&&"none"===t.effect)return;if(-1===n.indexOf("all")&&-1===n.indexOf(t.group))return;let o=a.find(`optgroup[data-type=${t.group}]`);i&&0==o.length&&(o=$(`<optgroup\n              label="${effectsTranslations[t.group]}"\n              data-type="${t.group}">\n            </optgroup>`),a.append(o)),(i?o:a).append($('<option value="'+t.effect+'" data-optgroup="'+t.group+'">'+effectsTranslations[t.effect]+"</option>"))})),void 0!==a.data("value")&&(a.val(a.data("value")),a.trigger("change",[{skipSave:!0}])),1===$(t).next().find('input[name="speed"]').length){let e=null;const n=$(t).next().find('input[name="speed"]'),i=function(e,t,a){const n=o.isMarquee(e),i=o.isMarquee(t);return n&&!i?1e3:!n&&i?1:0===String(a).length?i?1:1e3:a};a.on("select2:open",(function(t){e=t.currentTarget.value})),n.val(i(e,e,n.val())),a.on("select2:select",(function(t){const a=t.params.data.id;n.val(i(e,a,n.val()))}))}})),r(".menu-board-category-selector",t).each((function(t,a){const n=$(a),o=$(a).find("select"),i=n.data("depends-on"),r=$(e).find("[name="+i+"]").val();""!=r&&(o.data("search-url",o.data("search-url-base").replace(":id",r)),makePagedSelect(o))})),r(".select2-hidden-accessible",t).each((function(e,t){$(t).on("select2:open",(function(e){const t=$(e.target).data("select2").dropdown?.$search;setTimeout((function(){t&&t.get(0).focus()}),10)}))}));let l=0;r("input[data-role=panelTagsInput]",t).each((function(e,t){const a=$(t),n=a.data("autoCompleteUrl"),o=a.data("searchTermKey");if(void 0!==n&&""!==n){l++;const e=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,initialize:!1,remote:{url:n,prepare:function(e,t){return t.data={tag:e},void 0!==o&&""!==o&&(t.data[o]=e),t},transform:function(e){return $.map(e.data,(function(e){return 1===l?{tag:e.type}:e.type}))}}});e.initialize().done((function(){(l>1||a.prev().is(".bootstrap-tagsinput"))&&("function"==typeof a.tagsinput&&a.tagsinput("destroy"),l=0);const t={name:"tags",source:e.ttAdapter()};1===l&&(t.displayKey="tag",t.valueKey="tag"),a.tagsinput({typeaheadjs:[{hint:!0,highlight:!0},t]})})).fail((function(){console.info("Auto-complete for tag failed! Using default..."),a.tagsinput()}))}else a.tagsinput()})),t||$(e).find(".xibo-form-input[data-depends-on]").each((function(t,o){const r=$(o);let l=r.data("depends-on");if(r.data("depends-on-added"))return;r.attr("data-depends-on-added",!0);let s=null;if(-1!==l.indexOf("[")&&-1!==l.indexOf("]")){const e=l.split("[");l=e[0],s=e[1].replace("]","")}const c='[name="'+l+'"]';$(e).find(c).on("change",(function(t){let o=null;const l=$(t.currentTarget);if(l.is("select")){const e=l.find("option:selected");o=e.data("set")?e.data("set"):e.val()}else o=l.is('input[type="checkbox"]')?l.is(":checked"):l.val();null!==s&&null!==o&&(o=o.split(",")[s]),r.children('input[type="checkbox"]').length>0?r.children('input[type="checkbox"]').prop("checked",o):r.hasClass("colorpicker-input")?""===o?(r.find("input").val(""),r.find(".input-group-addon").css("background-color","")):null!=o&&Color(o).valid&&(r.find("input").colorpicker("setValue",o),r.find(".input-group-addon").css("background-color",o)):r.children('input[type="text"]').length>0?r.children('input[type="text"]').val(o):(r.data("dependsOnValue",o),i.initFields(e,r,a,n))}))}))},handleFormReplacements:function(e,t){const a=function(e){return e.replace(/\%(.*?)\%/g,(function(e,a){return a.split(".").reduce(((e,t)=>e[t]||`%${t}%`),t)}))};$(e).find(".xibo-form-input > [title], .xibo-form-btn[title]").each((function(e,t){const n=$(t),o=n.attr("title"),i=n.attr("data-original-title");o&&o.indexOf("%")>-1&&n.attr("title",a(o)),i&&i.indexOf("%")>-1&&n.attr("data-original-title",a(i))})),$(e).find(".xibo-form-input > *, .xibo-form-btn").each((function(e,t){const n=$(t),o=n.html();o&&o.indexOf("%")>-1&&n.html(a(o))}))},setConditions:function(e,t,a){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];$(e).find(".xibo-form-input[data-visibility]").each((function(o,r){let l=$(r).data("visibility");l=JSON.parse(JSON.stringify(l).replace(/\$(.*?)\$/g,(function(e,a){return a.split(".").reduce(((e,t)=>e[t]),t)})));const s=function(t,a){let o="";const r=t.type,l=t.conditions,s=function(){let t;for(let a=0;a<l.length;a++){const o=l[a],s=`[name="${o.field}"]`,c=$(e).find(s),d=0!==c.length&&"checkbox"===c.attr("type")?c.is(":checked"):c.val(),p=i(o.type,o.value,d,n);a>0?"and"===r?t=t&&p:"or"===r&&(t=t||p):t=p}t?a.show():a.hide()};for(let e=0;e<t.conditions.length;e++)o+=`[name="${t.conditions[e].field}"]`,e<t.conditions.length-1&&(o+=",");String(o).length>0&&$(e).find(o).on("change",s),s()};if(Array.isArray(l))for(let e=0;e<l.length;e++)s(l[e],$(r));else(function(t){if(t?.field&&a)return 0!==$(e).find(`[name="${t.field}"]`).length;if(t.conditions.length>0&&a){for(let a=0;a<t.conditions.length;a++){const n=t.conditions[a].field;if(0===$(e).find(`[name="${n}"]`).length)return!1}return!0}})(l)&&s({conditions:[l],test:""},$(r))}))},checkForSpacingIssues:function(e){e.find("input[type=text]").each((function(e,t){formRenderDetectSpacingIssues(t),$(t).on("keyup",_.debounce((function(){formRenderDetectSpacingIssues(t)}),500))}))},makeFormReadOnly:function(e){e.find("input, select, textarea, button:not(.copyTextAreaButton)").attr("disabled","disabled"),e.find(".colorpicker-input i.input-group-addon").off("click"),e.find("button:not(.copyTextAreaButton), .date-clear-button").hide(),e.find(".bootstrap-switch").hide()},reloadRichTextFields:function(e){e.find(".rich-text").each((function(t,a){const n=$(a).attr("id"),o=$(a).parent();o.addClass("loading"),formHelpers.destroyCKEditor(n),formHelpers.setupCKEditor(e,n,!0,null,!1,!0),o.removeClass("loading")}))},createFallbackDataForm:function(e,t,a,n,o){const i=e.fields,r=function(e,t){e.find(".fallback-data-record-previews").empty(),i.forEach((a=>{if(t&&t[a.id]){const n=t[a.id],o=$(templates.forms.fallbackDataRecordPreview({trans:fallbackDataTrans,field:a,data:n}));e.find(".fallback-data-record-previews").append(o)}}))},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.data,a=e.displayOrder,l=e.id,s=$(templates.forms.fallbackDataRecord({trans:fallbackDataTrans}));return null!=l&&s.data("recordId",l),null!=a&&s.data("displayOrder",a),i.forEach((e=>{const a=function(e,t){const a={...e},n=Math.floor(1e6*Math.random());let o;return null!=t&&(a.value=t),-1!=["datetime","date","time","month"].indexOf(a.type)&&(a.variant="datetime"===a.type?"dateTime":a.type,a.type="date"),"image"===a.type&&(a.type="mediaSelector",a.mediaSearchUrl=urlsForApi.library.get.url,a.initialValue=a.value,a.initialKey="mediaId"),"string"===a.type&&(a.type="text"),a.name=a.id,a.id=a.id+"_"+n,a.customClass="fallback-property",templates.forms.hasOwnProperty(a.type)&&(o=$(templates.forms[a.type](a))),o&&o.is('[data-is-required="true"]')&&o.find("label").append(`<span class="ml-1"\n            title=${fallbackDataTrans.requiredField}>*</span>`),o}(e,t&&t[e.id]);s.find(".fallback-data-record-fields").append(a)})),forms.initFields(s),r(s,t),$.isEmptyObject(e)&&s.addClass("editing"),s.find("button").on("click",(function(e){const t=$(e.currentTarget).data("action");"save-record"==t?function(e){const t={};let a=!1;if(i.forEach((n=>{const o=e.find('[name="'+n.id+'"]'),i=o.val(),r=o.parents(".fallback-property").is('[data-is-required="true"]');""==i&&r?a=!0:""!=i&&(t[n.id]=i)})),$.isEmptyObject(t))return void toastr.error(fallbackDataTrans.invalidRecordEmpty);if(a)return void toastr.error(fallbackDataTrans.invalidRecordRequired);const l=function(){r(e,t),o(),e.removeClass("editing")},s=e.data("recordId"),c=e.index();s?n.editFallbackDataRecord(s,t,c).then((e=>{e.success&&l()})):n.addFallbackData(t,c).then((t=>{t.success&&(e.data("recordId",t.id),l())}))}(s):"delete-record"==t?function(e){const t=e.data("recordId");t?n.deleteFallbackDataRecord(t).then((t=>{t.success&&(e.remove(),o())})):e.remove()}(s):"edit-record"==t&&s.addClass("editing")})),s};$(t).append(templates.forms.fallbackDataContent({data:e,trans:fallbackDataTrans,showFallback:n.getOptions().showFallback}));const s=$(t).find(".fallback-data-records");a&&(a.sort(((e,t)=>e.displayOrder-t.displayOrder)),a.forEach((e=>{s.append(l(e))})),XiboInitialise(".fallback-data-records")),$(t).find('[data-action="add-new-record"]').on("click",(function(){s.append(l()),XiboInitialise(".fallback-data-records")})),s.sortable({axis:"y",items:".fallback-data-record",containment:"parent",update:function(){let e=0;const t=[];s.find(".fallback-data-record").each(((a,n)=>{const o=$(n).data();o.recordId&&(t.push({dataId:o.recordId,displayOrder:e}),$(n).data("displayOrder",e),e++)})),n.saveFallbackDataOrder(t).then((e=>{e.success&&o()}))}})}}},53439:function(){$((function(){const e=$("#help-pane");e.find(".help-pane-icon").on("click",(()=>{e.find(".help-pane-card").toggle()})),e.find(".close-icon").on("click",(()=>{e.find(".help-pane-card").hide()}))}))},15234:function(t){t.exports={displayTooltips:!0,deleteConfirmation:!0,showLoadingScreen:function(){let e=$(".loading-overlay.loading").data("bump")||0;e++,e<=1&&$(".loading-overlay").addClass("loading").fadeIn(400),$(".loading-overlay").data("bump",e++)},hideLoadingScreen:function(){let e=$(".loading-overlay.loading").data("bump")||1;e--,e<=0&&$(".loading-overlay.loading").fadeOut(400,(function(e){$(e).removeClass("loading")})),$(".loading-overlay").data("bump",e)},reloadTooltips:function(e){let{forcedOption:t=null,placement:a="auto"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=(null!=t?t:this.displayTooltips)?'[data-toggle="tooltip"]:not(:disabled)':'[data-toggle="tooltip"].tooltip-always-on:not(:disabled)';$(e).find('[data-toggle="tooltip"]').tooltip("dispose"),$(e).find(n).tooltip({boundary:"window",trigger:"hover",placement:a}),this.clearTooltips()},clearTooltips:function(){$("body").find(".tooltip, .popover:not(.tour)").remove()},timeFormat:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.floor(e%3600%60),i=function(e){return e<10&&(e="0"+e),e},r=a>0?i(a)+":":"",l=n>0||""!=r||t?i(n)+":":"";return r+l+(""!=l?i(o):o)},formatFileSize:function(t){return(b=Math,c=b.log,d=1e3,e=c(t)/c(d)|0,t/b.pow(d,e)).toFixed(2)+" "+(e?"kMGTPEZY"[--e]+"B":"Bytes")},getModuleByType:function(e){return modulesList.find((t=>t.type===e))},hasTarget:function(e,t){let a=$(e).data("target");return null!=a&&(Array.isArray(a)||(a=a.split(" ")),-1!==a.indexOf("all")||-1!==a.indexOf(t))},clearContainer:function(e){e.find(".flatpickr-input").each(((e,t)=>{t._flatpickr&&t._flatpickr.destroy()})),e.find("select[data-select2-id]").select2("destroy"),e.find(".colorpicker-element").colorpicker("destroy"),e.is(".ui-droppable")&&e.droppable("destroy"),e.find(".ui-droppable").droppable("destroy"),e.find(".ui-draggable").draggable("destroy"),e.find(".ui-sortable").sortable("destroy"),e.find(".masonry-container").masonry("destroy"),e.find(".xibo-code-input .code-input").each(((e,t)=>{const a=$(t).attr("id");$(t).off("change"),window.codeEditors[a]&&(window.codeEditors[a].getModel().dispose(),window.codeEditors[a].dispose(),window.codeEditors[a]=null,delete window.codeEditors[a])})),e.find(".rich-text").each(((e,t)=>{const a=$(t).attr("id");formHelpers.destroyCKEditor(a)}))},handleEditorMinimumDimensions:function(e,t){const a=function(){const a=$(window).width(),n=$(window).height(),o=e.showMinDimensionsMessage,i=e.toolbar.levelLimiter,r=localStorage.getItem("minSizeWarningOff");if($.isEmptyObject(e.editorContainer))$(window).off("resize."+e.mainObjectType);else if(e.showMinDimensionsMessage=a<1200||n<600,e.toolbar.levelLimiter=a<1600,o!=e.showMinDimensionsMessage||t)if(e.showMinDimensionsMessage&&!r){e.editorContainer.append(`<div class="min-res-message">\n            <div>\n              <h4>${editorsTrans.minDimensionsMessageHeader}</h4>\n              <div>${editorsTrans.minDimensionsMessageBody}</div>\n              <button class="close-res-message-button btn btn-outline-primary">\n                  ${editorsTrans.minDimensionsMessageHide}\n              </button>\n            </div>\n          </div>`);const t=$(".custom-overlay").clone();t.removeClass("custom-overlay").addClass("custom-overlay-clone min-res-overlay"),t.appendTo(e.editorContainer),e.editorContainer.find(".min-res-message .close-res-message-button").on("click",(function(){e.minSizeWarningOff=!0,localStorage.setItem("minSizeWarningOff",!0),e.common.handleEditorMinimumDimensions(e,!0),e.viewer&&e.viewer.render()}))}else e.editorContainer.find(".min-res-message").remove(),e.editorContainer.find(".min-res-overlay").remove();else i!=e.toolbar.levelLimiter&&e.toolbar.render()};$(window).on("resize."+e.mainObjectType,_.debounce(a,60)),a()}}},95061:function(e){e.exports=new function(){const e=this;return this.getPinnedSlots=function(e){return Object.keys(e).reduce((function(t,a){const n=e[a];return n.hasPinnedSlot?[...t,n.slot]:t}),[])},this.getPinnedItems=function(e){return 0===Object.values(e).length?e:Object.keys(e).reduce((function(t,a){const n=e[a];return n.pinSlot&&(t[a]=n),t}),{})},this.getItemsByKey=(e,t,a)=>a&&e.hasOwnProperty(t)&&Object.keys(e[t]).length>0?Object.keys(e[t]).reduce((function(a,n){return[...a,e[t][n]]}),[]):e.hasOwnProperty(t)?e[t]:[],this.getMinAndMaxSlot=function(e){const t=e=>e.map((function(e){return e?.slot+1||0}));return{minSlot:null===e?1:Math.min(...t(e)),maxSlot:null===e?1:Math.max(...t(e))}},this.getMaxMinSlot=(t,a,n)=>{const o=t?.length>0?t.reduce(((t,o)=>[...t,...e.getItemsByKey(o,a,n)]),[]):null,i=e=>e.map((function(e){return e?.slot||0}));return{minSlot:null===o?1:Math.min(...i(o))+1,maxSlot:null===o?1:Math.max(...i(o))+1}},this.isGroup=function(e){return e.hasOwnProperty("groupId")},this.isMarquee=function(e){return"marqueeLeft"===e||"marqueeRight"===e||"marqueeUp"===e||"marqueeDown"===e},this.renderElement=function(e,t,a){const n=e(Object.assign(t,globalOptions));let o=t.top,i=t.left;const r=Boolean(t.groupId),l=Boolean(t.groupProperties);t.group&&(t.group.isMarquee?(o=t.top-t.group.top,i=t.left-t.group.left):(t.top>=t.group.top&&(o=t.top-t.group.top),t.left>=t.group.left&&(i=t.left-t.group.left)));let s={height:t.height,width:t.width,position:"absolute",top:o,left:i,zIndex:t.layer,transform:`rotate(${t?.rotation||0}deg)`};a&&(s={...s,top:t.top,left:t.left,zIndex:t.layer},r&&l&&(s.top=t.top>=t.groupProperties.top?t.top-t.groupProperties.top:0,s.left=t.left>=t.groupProperties.left?t.left-t.groupProperties.left:0,s.zIndex="none")),t.isGroup||"text"!==t.dataOverride||!t.group||!t.group.isMarquee||"marqueeLeft"!==t.effect&&"marqueeRight"!==t.effect||(s={...s,position:"static",top:"unset",left:"unset",width:t?.textWrap?t.width:"initial",display:"flex",flexShrink:"0",wordWrap:"break-word"});const c=$(n).first().attr("id",t.elementId).addClass(`${t.uniqueID}--item`).css(s);return t.isGroup||"text"!==t.dataOverride||!t.group||!t.group.isMarquee||"marqueeLeft"!==t.effect&&"marqueeRight"!==t.effect||(c.get(0).style.removeProperty("white-space"),c.get(0).style.setProperty("white-space",t?.textWrap?"unset":"nowrap","important")),c.prop("outerHTML")},this.renderDataItem=function(t,a,n,o,i,r,l,s,c,d,p,u,f){const m=$(`<div class="${c}--item"\n      data-group-key="${a}"></div>`),g="."+c+"--item[data-group-key=%key%]";if(o.hasOwnProperty("hbs")&&"function"==typeof o.hbs&&"empty"!==a){let i={width:p.width,height:p.height};p&&p.isMarquee&&(i={...i,position:"relative",display:"flex",flexShrink:"0"}),m.css(i),d&&0===d.find(g.replace("%key%",a)).length&&d.append(m);let r=!1;!t&&"text"===o.dataOverride&&p.isMarquee&&("marqueeLeft"===o.effect||"marqueeRight"===o.effect?(1===d.find(g.replace("%key%",a)).length&&d.find(g.replace("%key%",a)).remove(),r=!0):"marqueeDown"!==o.effect&&"marqueeUp"!==o.effect||(r=!1));const l=r?d:d.find(g.replace("%key%",a)),s=Object.assign(o.templateData,{isGroup:t},String(o.dataOverride).length>0&&String(o.dataOverrideWith).length>0?n:{data:n},{group:p});if(s.isExtended)if("dataset"===s.type&&s.hasOwnProperty("datasetField")&&n.hasOwnProperty(s.datasetField))s[s.dataOverride]=n[s.datasetField];else{const e=transformer.getExtendedDataKey(s.dataOverrideWith);s.dataOverride===e&&n.hasOwnProperty(e)&&(s[s.dataOverride]=n[e])}l.append(e.renderElement(o.hbs,s));const c=o.uniqueID||o.templateData?.uniqueID;void 0!==o.onTemplateRender()&&o.onTemplateRender()(o.elementId,l.find(`.${c}--item`),f.find(`.${c}--item`),{item:o,...o.templateData,data:n},u)}else d&&0===d.find(g.replace("%key%",a)).length&&d.append(m),d.find(g.replace("%key%",a)).append("")},this}},28039:function(e,t,a){(e.exports=a(76314)(!1)).push([e.id,"/*!\n * \n *\n * Oasys - Digital Signage \n *\n * This file is part of CMS.\n *\n * CMS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * any later version.\n *\n * CMS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with .  If not, see <http://www.gnu.org/licenses/>.\n */.input-info-container{float:right;padding-top:6px}.input-info-container .input-info{float:right;margin-left:4px;color:#74acfa}.input-info-container .input-info.checkbox-popup{padding-top:3px}.text-area-buttons{display:flex;justify-content:flex-end;background-color:#e8f1fe;border-radius:.25rem .25rem 0 0}.code-input-group .code-input-editor-container{background-color:#333;padding:6px;height:250px;border:2px solid #898989;border-radius:.25rem}.code-input-group .code-input-editor-container .code-input-editor{width:100%;height:100%}.code-input-group .monaco-editor .editor-widget.suggest-widget{left:0 !important}.date-input-group .input-group>.form-control:not([type=hidden]){border-top-left-radius:.25rem;border-bottom-left-radius:.25rem}.date-input-group .input-group>.form-control:not(:disabled){background-color:#fff;cursor:pointer}.header{font-weight:bold;font-size:1.1rem;color:#1775f6;margin-left:-4px}.header.main{color:#0e4694;font-size:1.3rem}.rich-text-temp-container{background-color:#000}#richTextDetachedOverlay{z-index:1049 !important}.ck-body-wrapper .ck-balloon-panel{z-index:1051 !important}.ck-editor-body-detached .ck-body-wrapper .ck-balloon-panel.ck-toolbar-container{right:150px !important;left:auto !important;top:66px !important;width:calc(100vw - 300px) !important}.rich-text-main-container{width:100%;transform-origin:top right;box-shadow:none !important;overflow:hidden;border-radius:0 0 .25rem .25rem}.rich-text-main-container textarea{display:none}.rich-text-main-container .rich-text-container-wrapper{font-size:medium;font-size:initial;max-height:202px;overflow:auto}.rich-text-main-container .rich-text-container-wrapper.loading>*{display:none}.rich-text-main-container .rich-text-container,.rich-text-main-container .rich-text-editor{overflow:visible}.rich-text-main-container .text-area-buttons{width:100%;position:sticky;left:0;top:0;z-index:1}.rich-text-main-container .text-area-buttons button:focus{box-shadow:none !important}.rich-text-main-container .ck-editor__editable_inline{outline-color:#eb7857;outline-style:solid}.rich-text-main-container.source .rich-text-container-wrapper{background-color:#fff !important;overflow:visible;overflow:initial}.rich-text-main-container.source .rich-text-container-wrapper .rich-text-container{height:100% !important}.rich-text-main-container.source .ck-editor__editable_inline{display:none}.rich-text-main-container.source textarea{display:inline !important;display:initial !important;opacity:1 !important;opacity:initial !important;height:100% !important;min-height:160px}.rich-text-main-container.source .rich-text-editor{display:none}.rich-text-main-container.source .viewSourceButton{outline:2px solid #898989;outline-offset:-5px;border-radius:8px}.rich-text-main-container.source .zoomButton{display:none}.rich-text-main-container.detached{z-index:1050;position:fixed;top:100px;right:150px;outline-width:1px;width:calc(100vw - 300px) !important;height:calc(100vh - 200px) !important;overflow:hidden}.rich-text-main-container.detached .rich-text-container-wrapper{height:calc(100% - 28.5px) !important;max-height:none}.rich-text-main-container.detached .rich-text-container{height:100%}.rich-text-main-container.detached .rich-text-dimensions-control{background:#fcfcfc;color:#333}.rich-text-main-container.detached .rich-text-dimensions-control .control-label{display:inline-block}.rich-text-main-container.detached .text-area-buttons{border-radius:.25rem .25rem 0 0;padding:6px;background-color:#333;background-color:rgba(51,51,51,.9)}.rich-text-main-container.detached .text-area-buttons button{color:#fff}.rich-text-dimensions-control{padding:6px 8px;background:#0e4694;margin:0;display:flex;grid-gap:8px;gap:8px;align-items:center;justify-content:flex-end}.rich-text-dimensions-control .control-label{display:none}.rich-text-dimensions-control .form-group{margin:0}.rich-text-dimensions-control .form-group input{height:25px;width:100%}.rich-text-dimensions-control .form-group input[type=checkbox]{margin:0 6px}.rich-text-dimensions-control select{padding:4px;height:28px}.dataset-column-selector,.ticker-tag-selector,.dataset-column-style-selector{display:flex;grid-gap:6px;gap:6px}.dataset-column-selector .connectedlist,.ticker-tag-selector .connectedlist,.dataset-column-style-selector .connectedlist{flex:1;min-width:0}.dataset-column-selector .connectedlist .text-info,.ticker-tag-selector .connectedlist .text-info,.dataset-column-style-selector .connectedlist .text-info{color:#121a5e !important;font-weight:bold}.dataset-column-selector .connectedlist .ui-sortable,.ticker-tag-selector .connectedlist .ui-sortable,.dataset-column-style-selector .connectedlist .ui-sortable{width:100% !important;background-color:#74acfa !important}.dataset-column-selector .connectedlist .li-sortable,.ticker-tag-selector .connectedlist .li-sortable,.dataset-column-style-selector .connectedlist .li-sortable{width:calc(100% - 12px)}.ticker-tag-selector,.dataset-column-style-selector{flex-wrap:wrap}.ticker-tag-selector .ticker-tag-styles,.ticker-tag-selector .dataset-column-styles,.dataset-column-style-selector .ticker-tag-styles,.dataset-column-style-selector .dataset-column-styles{width:100%}.ticker-tag-selector .ticker-tag-styles .ticker-tag-style-title,.ticker-tag-selector .ticker-tag-styles .dataset-col-style-title,.ticker-tag-selector .dataset-column-styles .ticker-tag-style-title,.ticker-tag-selector .dataset-column-styles .dataset-col-style-title,.dataset-column-style-selector .ticker-tag-styles .ticker-tag-style-title,.dataset-column-style-selector .ticker-tag-styles .dataset-col-style-title,.dataset-column-style-selector .dataset-column-styles .ticker-tag-style-title,.dataset-column-style-selector .dataset-column-styles .dataset-col-style-title{writing-mode:vertical-lr;font-size:1.2rem;color:#121a5e}.ticker-tag-selector .ticker-tag-styles .ticker-tag-style,.ticker-tag-selector .ticker-tag-styles .dataset-col-style,.ticker-tag-selector .dataset-column-styles .ticker-tag-style,.ticker-tag-selector .dataset-column-styles .dataset-col-style,.dataset-column-style-selector .ticker-tag-styles .ticker-tag-style,.dataset-column-style-selector .ticker-tag-styles .dataset-col-style,.dataset-column-style-selector .dataset-column-styles .ticker-tag-style,.dataset-column-style-selector .dataset-column-styles .dataset-col-style{display:flex}.ticker-tag-selector .ticker-tag-styles .ticker-tag-style-properties,.ticker-tag-selector .ticker-tag-styles .dataset-col-style-properties,.ticker-tag-selector .dataset-column-styles .ticker-tag-style-properties,.ticker-tag-selector .dataset-column-styles .dataset-col-style-properties,.dataset-column-style-selector .ticker-tag-styles .ticker-tag-style-properties,.dataset-column-style-selector .ticker-tag-styles .dataset-col-style-properties,.dataset-column-style-selector .dataset-column-styles .ticker-tag-style-properties,.dataset-column-style-selector .dataset-column-styles .dataset-col-style-properties{border-left:6px solid #74acfa;padding-left:12px;margin-left:6px}.ticker-tag-selector .ticker-tag-styles .ticker-tag-style-properties .form-group,.ticker-tag-selector .ticker-tag-styles .dataset-col-style-properties .form-group,.ticker-tag-selector .dataset-column-styles .ticker-tag-style-properties .form-group,.ticker-tag-selector .dataset-column-styles .dataset-col-style-properties .form-group,.dataset-column-style-selector .ticker-tag-styles .ticker-tag-style-properties .form-group,.dataset-column-style-selector .ticker-tag-styles .dataset-col-style-properties .form-group,.dataset-column-style-selector .dataset-column-styles .ticker-tag-style-properties .form-group,.dataset-column-style-selector .dataset-column-styles .dataset-col-style-properties .form-group{margin-bottom:.5rem}.xibo-command-builder .command-type{display:block;width:100%}.xibo-command-builder .command-inputs{border-radius:0 0 6px 6px;padding:12px 6px;margin:0px 1px 4px 1px;background-color:#e8f1fe}.xibo-command-builder .command-inputs .col-12{max-width:100%}.xibo-command-builder .command-inputs .intent-name{width:100%;margin:6px 0}.xibo-command-builder .command-inputs .intent-type-container{font-size:0}.xibo-command-builder .command-inputs .intent-type-container .intent-type-label{width:30%;font-size:14px}.xibo-command-builder .command-inputs .intent-type-container .intent-type{width:70%}.xibo-command-builder .command-inputs .intent-extra-element{display:flex;grid-gap:2px;gap:2px;margin-bottom:2px}.xibo-command-builder .command-inputs .intent-extra-element select{padding:0;width:30%}.xibo-command-builder .command-preview{border-radius:6px;padding:8px !important}.playlist-mixer .mixer-playlist-container{padding:.4rem .2rem 0 .2rem !important}.playlist-mixer .subplaylist-item-row>*,.playlist-mixer .subplaylist-items-header>*{margin-right:2px}.playlist-mixer .subplaylist-item-row .subplaylist-id-container-header,.playlist-mixer .subplaylist-items-header .subplaylist-id-container-header{margin-left:70px}.playlist-mixer .subplaylist-item-row .subplaylist-spots-container,.playlist-mixer .subplaylist-item-row .subplaylist-spots-length-container,.playlist-mixer .subplaylist-items-header .subplaylist-spots-container,.playlist-mixer .subplaylist-items-header .subplaylist-spots-length-container{width:100px}.playlist-mixer .subplaylist-item-row .subplaylist-spots-container input,.playlist-mixer .subplaylist-item-row .subplaylist-spots-length-container input,.playlist-mixer .subplaylist-items-header .subplaylist-spots-container input,.playlist-mixer .subplaylist-items-header .subplaylist-spots-length-container input{width:100%}.playlist-mixer .subplaylist-item-row .subplaylist-id-container,.playlist-mixer .subplaylist-items-header .subplaylist-id-container{width:100px}.playlist-mixer .subplaylist-item-row .subplaylist-id-container .select2-container,.playlist-mixer .subplaylist-items-header .subplaylist-id-container .select2-container{min-width:100% !important}.playlist-mixer .subplaylist-item-row .subplaylist-spots-fill-container,.playlist-mixer .subplaylist-items-header .subplaylist-spots-fill-container{width:120px}.playlist-mixer .subplaylist-item-row .subplaylist-spots-fill-container .select2-container,.playlist-mixer .subplaylist-items-header .subplaylist-spots-fill-container .select2-container{min-width:100% !important}.playlist-mixer .subplaylist-items-footer{position:sticky;left:0;bottom:0;padding:10px;width:100%;text-align:center !important}.canvas-widget-control{padding:8px;background-color:#1775f6}.canvas-widget-control .canvas-widget-control-dropdown{color:#e8f1fe;margin:0}.canvas-widget-control .canvas-widget-control-dropdown .input-info-container{display:inline-block;float:none;padding:0}.canvas-widget-control .canvas-widget-control-dropdown .canvas-widget-control-add{cursor:pointer;float:right;padding:0 6px;border-radius:4px}.canvas-widget-control .canvas-widget-control-dropdown .canvas-widget-control-add i{margin-right:4px}.canvas-widget-control .canvas-widget-control-dropdown .canvas-widget-control-add:hover{background-color:#085dd2}.widget-info-container{text-align:center;padding:6px;background-color:#74acfa;color:#f3f8ff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.widget-info-container .widget-info-name{font-weight:bold}.snippet-selector{margin-top:-12px}.snippet-selector .select2-selection{background-color:#e8f1fe !important}.snippet-selector .select2-selection__placeholder{color:#121a5e !important;font-weight:bold}.panel-group{margin-left:-1rem;padding-left:1.2rem;border-left:6px solid #e8f1fe}.panel-group .panel-heading{background-color:#e8f1fe;padding:1rem;margin:.5rem -1.5rem .5rem -1.5rem;cursor:pointer}.panel-group .panel-heading .panel-title{font-size:1.1rem;font-weight:bold;color:#1775f6;margin:0}.panel-group .panel-heading .help-block{margin-top:.5rem}.panel-group .panel-heading i{font-size:1rem}.panel-group .panel-heading[aria-expanded=true] .fa-chevron-up{display:inline-block}.panel-group .panel-heading[aria-expanded=true] .fa-chevron-down{display:none}.panel-group .panel-heading[aria-expanded=false] .fa-chevron-up{display:none}.panel-group .panel-heading[aria-expanded=false] .fa-chevron-down{display:inline-block}.panel-group .panel-collapse{padding:1rem 0 .25rem 0}#errorMessage{margin-left:15px;box-sizing:border-box;width:calc(100% - 30px)}#errorMessage p{margin-bottom:0}select[readonly].select2-hidden-accessible+.select2-container{pointer-events:none;touch-action:none}select[readonly].select2-hidden-accessible+.select2-container .select2-selection{background:#eee;box-shadow:none}select[readonly].select2-hidden-accessible+.select2-container .select2-selection__arrow,select[readonly].select2-hidden-accessible+.select2-container .select2-selection__clear{display:none}.developer-template-controls-container{overflow:auto;max-height:calc(100vh - 400px)}.developer-template-controls-container .developer-template-controls{display:flex;grid-gap:16px;gap:16px;margin-bottom:6px}.developer-template-controls-container .developer-template-controls .developer-template-placeholder{width:100%;height:calc(100vh - 410px);display:flex;justify-content:center;align-items:center;font-size:18px;color:#0e4694;background-color:#e8f1fe;border-radius:6px}.developer-template-controls-container .developer-template-controls .developer-template-control-item{background-color:#dcedff;padding:16px;border-radius:4px;display:flex;flex-direction:column;align-items:center;grid-gap:12px;gap:12px;min-width:360px;max-width:360px}.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-form{display:flex;flex-direction:column;flex:1;grid-gap:18px;gap:18px}.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-form .xibo-form-input{margin-bottom:.5rem}.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-form .xibo-form-input label,.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-form .xibo-form-input .input-info-container{float:left}.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-form .player-compat-items{display:grid;grid-template-columns:repeat(4, 1fr);grid-gap:3px 6px;gap:3px 6px;padding:6px;background-color:#b9d6fc;border-radius:6px}.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-form .option-item{display:inline-flex;align-items:center;grid-gap:6px;gap:6px;background-color:#b9d6fc;padding:6px;border-radius:6px;margin-bottom:4px}.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-form .test-container .test-title,.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-form .test-container .condition-title{font-weight:bold}.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-form .test-container .test-item{background-color:#b9d6fc;border-radius:6px;padding:6px;margin-bottom:6px}.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-form .test-container .test-item-properties{display:flex;grid-gap:6px;gap:6px}.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-form .test-container .condition-item{background-color:#d1e4fd;padding:6px;border-radius:8px;margin-bottom:6px}.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-form .test-container .test-conditions-container{margin:6px 0 6px 34px}.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-form .test-container .item-header{display:flex;justify-content:space-between;margin-bottom:6px}.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-item-controls{width:100%;display:flex;justify-content:space-between}.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-item-controls .item-move{cursor:col-resize;color:#74acfa}.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-item-controls .delete-btn{padding:0;color:#bf5555}.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-item-controls .item-move,.developer-template-controls-container .developer-template-controls .developer-template-control-item .developer-template-control-item-controls .delete-btn{font-size:24px}.image-replace-control .image-replace-control-area{height:80px;border-radius:4px;text-align:center;color:#000;background-color:#f3f8ff;padding:18px;border:2px solid #c0daff}.image-replace-control .image-replace-control-area.ui-droppable-active{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;position:relative;z-index:1011}.image-replace-control .image-replace-control-area.ui-droppable-active.ui-droppable-hover,.image-replace-control .image-replace-control-area.ui-droppable-active:hover{background-color:#fff}.color-gradient{background-color:#f3f8ff;padding:6px;border-left:8px solid #1775f6}.color-gradient .color-gradient-colours{display:flex;grid-gap:6px;gap:6px}.color-gradient .color-gradient-colours .picker-container.colorpicker.colorpicker-with-alpha{min-width:150px}.fallback-data-content{margin-bottom:1rem}.fallback-data-content .fallback-data-record{padding:1rem;background-color:#fff;border:3px solid #74acfa;margin-bottom:.5rem;border-radius:.5rem;cursor:-webkit-grab;cursor:grab}.fallback-data-content .fallback-data-record .fallback-data-record-previews{margin-bottom:.6rem}.fallback-data-content .fallback-data-record .fb-btn-edit,.fallback-data-content .fallback-data-record .fallback-data-record-previews{display:block}.fallback-data-content .fallback-data-record .fallback-data-record-preview{display:flex;justify-content:space-between;margin-bottom:.2rem}.fallback-data-content .fallback-data-record .fallback-data-record-preview .fallback-data-record-preview-title{font-weight:bold}.fallback-data-content .fallback-data-record .fallback-data-record-preview .fallback-data-record-preview-title,.fallback-data-content .fallback-data-record .fallback-data-record-preview .fallback-data-record-preview-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.fallback-data-content .fallback-data-record .fallback-data-record-preview.hidden{display:none}.fallback-data-content .fallback-data-record .fb-btn-save,.fallback-data-content .fallback-data-record .fallback-data-record-fields{display:none}.fallback-data-content .fallback-data-record.editing{border-color:#eb7857}.fallback-data-content .fallback-data-record.editing .fb-btn-edit,.fallback-data-content .fallback-data-record.editing .fallback-data-record-previews{display:none}.fallback-data-content .fallback-data-record.editing .fb-btn-save,.fallback-data-content .fallback-data-record.editing .fallback-data-record-fields{display:block}.fallback-data-content .fallback-data-record .fallback-property[data-is-required=true]{color:#bf5555;font-weight:bold}.fallback-data-content .fallback-data-record .fallback-data-record-buttons{display:flex;justify-content:space-between;grid-gap:1rem;gap:1rem}.fallback-data-content .fallback-data-record .fallback-data-record-buttons button{flex:1 1}",""])},19564:function(e,t,a){(e.exports=a(76314)(!1)).push([e.id,"/*!\n * \n *\n * Oasys - Digital Signage  \n *\n * This file is part of CMS.\n *\n * CMS is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * any later version.\n *\n * CMS is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with CMS.  If not, see <http://www.gnu.org/licenses/>.\n */.help-pane{position:fixed;bottom:0;right:10px;z-index:10000}.help-pane-card{width:18rem;display:none}.help-pane-card .close-icon{float:right;padding-top:3px;cursor:pointer}.help-pane-icon{text-align:right;padding:15px}.help-pane-icon i{font-size:48px;color:#1775f6;cursor:pointer}",""])},76314:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var i=(a=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),r=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[n].concat(r).concat([i]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+a+"}":a})).join("")},t.i=function(e,a){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(n[i]=!0)}for(o=0;o<e.length;o++){var r=e[o];null!=r[0]&&n[r[0]]||(a&&!r[2]?r[2]=a:a&&(r[2]="("+r[2]+") and ("+a+")"),t.push(r))}},t}},43128:function(e,t,a){var n=a(85072),o=a(28039);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);n(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},21863:function(e,t,a){var n=a(85072),o=a(19564);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);n(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},85072:function(e,t,a){"use strict";var n,o=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),i=[];function r(e){for(var t=-1,a=0;a<i.length;a++)if(i[a].identifier===e){t=a;break}return t}function l(e,t){for(var a={},n=[],o=0;o<e.length;o++){var l=e[o],s=t.base?l[0]+t.base:l[0],c=a[s]||0,d="".concat(s," ").concat(c);a[s]=c+1;var p=r(d),u={css:l[1],media:l[2],sourceMap:l[3]};-1!==p?(i[p].references++,i[p].updater(u)):i.push({identifier:d,updater:g(u,t),references:1}),n.push(d)}return n}function s(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var i=a.nc;i&&(n.nonce=i)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function p(e,t,a,n){var o=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=d(t,o);else{var i=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}function u(e,t,a){var n=a.css,o=a.media,i=a.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var f=null,m=0;function g(e,t){var a,n,o;if(t.singleton){var i=m++;a=f||(f=s(t)),n=p.bind(null,a,i,!1),o=p.bind(null,a,i,!0)}else a=s(t),n=u.bind(null,a,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var a=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var o=r(a[n]);i[o].references--}for(var s=l(e,t),c=0;c<a.length;c++){var d=r(a[c]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}a=s}}}}},a={};function n(e){var o=a[e];if(void 0!==o)return o.exports;var i=a[e]={id:e,exports:{}};return t[e](i,i.exports,n),i.exports}n.nc=void 0,n(43128),n(64720),n(53439),n(21863)}();